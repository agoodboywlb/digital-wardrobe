# digital-wardrobe 产品需求与迭代规划

> 版本: v0.6.0 (Beta)
> 更新日期: 2026-02-09
> 状态: 活跃开发中

## 🌟 1. 产品愿景 (Vision)

打造一款**极简美学、移动优先**的个人电子衣橱管理工具。帮助用户建立与衣物的良性关系，通过数据化管理提升穿衣效率，降低闲置率，实现理性消费与可持续时尚。

## 📱 2. 功能现状 (Current State)

### 2.1 核心模块

| 模块                    | 状态      | 描述                                                                                                          |
| :---------------------- | :-------- | :------------------------------------------------------------------------------------------------------------ |
| **衣橱管理 (Wardrobe)** | ✅ 基础版 | 支持增删改查(CRUD)，基础分类(上装/下装等)，单图上传，Supabase 存储。                                          |
| **搭配灵感 (Outfits)**  | ✅ 已完成 | 支持创建搭配，关联单品，**日历视图（列表/日历双视图切换，按日查看，搭配预览）**，支持按日期规划穿搭历史回顾。 |
| **统计分析 (Stats)**    | ✅ 基础版 | 资产概览(数量/估值)，品类占比(Pie Chart)，CPW(每穿成本)排行。                                                 |
| **数据导入 (Import)**   | ✅ 基础版 | 从主流电商平台实现数据导入。                                                                                         |

### 2.2 用户体验

- **UI/UX**: 采用极简设计风格，移动端适配良好。
- **性能**: 基础流程流畅，但在大数据量下的列表渲染和图片加载有待优化。
- **国际化**: 已通过 `categoryFormatter` 实现核心字段的中文化显示。

---

## 🚀 3. 迭代规划 (Roadmap)

### 🔴 P0: 体验优化与修复 (Immediate)

_目标：修复已知痛点，提升应用的流畅度和可用性。_

1.  **详情页快捷操作**
    - [x] **增加直接删除入口**: 在详情页右上角或底部增加删除按钮，无需进入编辑页即可删除。
    - [x] **图片预览优化**: 支持点击图片全屏查看。
2.  **列表页筛选优化**
    - [x] **Filter Bar 交互**: 点击搜索栏右侧的筛选按钮，弹出高级筛选面板（品牌、季节、价格区间）。
    - [x] **搜索增强**: 支持拼音首字母搜索（如 's' -> '上装'）。
3.  **UI 细节打磨**
    - [ ] **加载状态优化**: 全局统一使用骨架屏 (Skeleton) 代替简单的 Loading Spinner，提升感知速度。
    - [ ] **标签样式统一**: 统一 "属性标签" (灰色) 与 "自定义标签" (彩色) 的视觉规范。

### 🟠 P1: 核心功能增强 (Next Release)

_目标：完善衣橱管理的核心闭环，提供更灵活的数据维度。_

1.  **日历视图 (Calendar View) ✅ 已完成**
    - [x] **日历组件**: 在搭配页面实现日历视图，支持列表视图/日历视图一键切换。
    - [x] **月历网格**: 标准6周×7天网格，周一为起始，支持月份导航（左右箭头）。
    - [x] **搭配预览**: 日历格内显示搭配衣物缩略图（3张叠加）+ 场合标签。
    - [x] **日期交互**: 点击空日期跳转创建搭配（预填日期），点击有搭配日期跳转当日详情页。
    - [x] **时间感知**: "今天"蓝色边框高亮，过去搭配半透明+灰度淡化。
    - [ ] **拖拽排期**: 下一步优化 - 允许拖拽搭配到特定日期。
2.  **自定义标签管理**
    - [ ] **标签池管理**: 提供专门的页面管理所有自定义标签（合并、删除、修改颜色）。
    - [ ] **快速打标**: 在添加/编辑页面提供历史标签推荐。
3.  **多图支持**
    - [x] **细节图**: 支持单个单品上传多张图片（如：正面、背面、洗标、上身图）。

### 🟡 P1.5: 用户中心与设置 (New Module)

_目标：建立完整的用户账户体系，提供个性化配置能力。_

1.  **个人信息管理 (Profile)**
    - [ ] **基本资料**: 头像上传、昵称修改、UID 展示、个人二维码。
    - [ ] **身材数据**: 记录三围、身高、体重等数据（为后续尺码推荐做准备）。
2.  **账号与安全 (Security)**
    - [x] **鉴权系统**: 完整的登录/注册/退出流程，持久化会话管理 (Supabase Auth)。
    - [ ] **安全设置**: 修改密码、账号绑定（微信/Apple ID）。
3.  **偏好设置 (Preferences)**
    - [ ] **通知提醒**: 每日穿搭推荐开关（自定义推送时间）、衣物护理提醒。
    - [ ] **通用设置**: 多语言切换（中文/English）、深色模式手动/自动切换。

### 🟢 P2: 数据与智能化 (Future)

_目标：挖掘数据价值，提供智能辅助。_

1.  **智能搭配 (Smart Outfits)**
    - [x] **随机搭配**: 基于季节和品类随机生成搭配建议。
    - [x] **天气联动**: 结合当地天气 API 推荐合适的衣物。
2.  **闲置管理 (Resale)**
    - [ ] **闲置判定**: 自动标记长期未穿（如 > 1年）的单品。
    - [ ] **一键生成文案**: 利用 LLM 基于单品信息不仅仅生成描述，还可以生成适合二手平台（如闲鱼）的转卖文案。
3.  **数据导入导出**
    - [ ] **数据导出**: 支持导出全部数据为 CSV/Excel，保障用户数据主权。

---

## 📝 4. 需求池 (Backlog)

- [ ] **深色模式优化**: 检查所有组件在 Dark Mode 下的对比度和可读性。
- [ ] **批量操作**: 列表页支持长按多选，批量删除或批量修改分类/季节。
- [ ] **分享功能**: 生成长图分享 "今日穿搭" 或 "衣橱概览" 到社交媒体。
- [ ] **多端同步**: 适配 iPad/Desktop 布局（响应式增强）。

---

## 🔧 5. 技术实现详情 (Implementation Notes)

### 5.1 日历视图技术栈

| 依赖             | 用途                                       |
| :--------------- | :----------------------------------------- |
| **date-fns**     | 轻量级日期处理（生成日历网格、日期格式化） |
| **React Hooks**  | 状态管理（viewMode, currentMonth）         |
| **React Router** | 路由导航与状态传递                         |
| **Tailwind CSS** | 响应式样式与深色模式                       |

### 5.2 新增组件结构

```
src/features/outfit/components/
├── OutfitPreview.tsx      # 搭配预览卡片（紧凑/完整双模式）
├── CalendarDayCell.tsx    # 日历日期格子（含搭配预览+交互）
├── CalendarGrid.tsx       # 6×7日历网格
├── CalendarHeader.tsx     # 月份导航头部
└── CalendarView.tsx       # 日历视图容器（状态管理）

src/pages/
└── DayOutfitsPage.tsx     # 当日搭配详情页
```

### 5.3 路由配置

- `/plan` - 搭配灵感页（支持 list/calendar 视图切换）
- `/plan/day/:date` - 当日搭配详情页

---

## 📦 6. 更新日志 (Changelog)

### v0.6.0 (2026-02-09)

#### ✨ 新功能

- **日历视图**: 在搭配页面新增日历月视图，支持列表/日历双视图切换
  - 标准月历网格，周一为起始
  - 月份导航（左右箭头 + "今天"快捷按钮）
  - 搭配预览：衣物缩略图 + 场合标签
  - 交互优化：点击日期创建/查看搭配
  - 时间感知："今天"高亮、过去搭配淡化

#### 🛠️ 优化

- 添加 date-fns 依赖
- 新增 5 个日历相关组件
- 优化 AddOutfitPage 支持预填日期
- 路由系统新增 `/plan/day/:date` 路径

---
