## Context

当前衣橱列表页（`WardrobePage`）的筛选体系由三部分组成：
1. **分类横向滚动条** (`WardrobeFilters`): 按品类（全部/上装/下装/外套/鞋履/配饰）切换。
2. **搜索栏** (`WardrobeHeader`): 支持按名称、品牌、标签的中文/英文子串匹配。
3. **高级筛选面板** (`AdvancedFilterDrawer`): 底部抽屉式，目前仅支持「季节」和「状态」两个维度。

所有筛选逻辑集中在 `useWardrobe` hook 中，使用 `useMemo` 在客户端对 `items` 数组进行多维过滤。数据模型 `ClothingItem` 包含 `brand`（string）和 `price`（number）字段，可直接用于新增的筛选维度。

## Goals / Non-Goals

**Goals:**
- 在高级筛选面板中新增「品牌」和「价格区间」筛选维度
- 品牌列表从已有衣物数据中动态提取，支持多选
- 价格区间提供预设段位 + 自定义输入
- 实现拼音首字母搜索（输入 `sz` 匹配 `上装`、输入 `jk` 匹配 `夹克`）
- 优化筛选状态标签指示器，覆盖所有维度

**Non-Goals:**
- 不涉及服务端搜索/筛选（继续使用客户端过滤）
- 不涉及数据模型或数据库 schema 变更
- 不实现全文搜索引擎集成
- 不实现筛选偏好持久化

## Decisions

### Decision 1: 拼音处理库选型 — 使用 `pinyin-pro`

**选定方案**: `pinyin-pro`

**理由**:
- 体积较小（gzip ~15KB），适合移动端
- API 简洁，支持获取拼音首字母（`pinyin(text, { pattern: 'first' })`）
- 活跃维护，TypeScript 类型完善
- 支持多音字处理

**备选方案**:
- `tiny-pinyin`: 更轻量（~8KB），但不支持多音字，已停止维护
- 自建映射表: 维护成本高，覆盖率不可控

### Decision 2: 品牌筛选交互 — 动态提取 + Chip 多选

**选定方案**: 从已加载的 `items` 数组中提取不重复的品牌列表，以 Chip（标签）形式展示，支持多选。

**理由**:
- 品牌列表随用户数据变化，无需硬编码
- 多选比单选更灵活（用户可能同时查看多个品牌）
- Chip 样式与现有季节/状态筛选保持视觉一致

**备选方案**:
- 品牌搜索下拉框: 适合品牌数量极大的场景，当前用户衣物数量有限，Chip 更直观

### Decision 3: 价格区间筛选 — 预设区间 + 自定义范围

**选定方案**: 提供 4 个预设区间按钮（`¥0-100`, `¥100-300`, `¥300-500`, `¥500+`），支持单选。下方增加可选的自定义最小值/最大值输入框。

**理由**:
- 预设区间覆盖大多数场景，降低操作成本
- 自定义输入作为补充，满足精确需求
- 当选中预设区间时，自定义输入自动填充对应值；修改自定义值则取消预设选中

### Decision 4: 拼音搜索的匹配策略 — 前缀匹配

**选定方案**: 将搜索词视为拼音首字母前缀，匹配目标字段（name, brand, tags）的拼音首字母序列。

**匹配规则**:
1. 用户输入搜索词后，先走原有的中文/英文子串匹配逻辑
2. 如果搜索词全为字母，额外进行拼音首字母匹配
3. 例如: `sz` → 匹配 name/brand/tags 中拼音首字母包含 `sz` 的项（如 `上装` → `sz`）
4. 拼音首字母在 items 加载后预计算并缓存，避免重复计算

### Decision 5: 筛选面板中品牌列表的排序与截断

**选定方案**: 品牌按出现频率降序排列，默认显示前 12 个，提供「展开全部」按钮。

**理由**:
- 按频率排序让高频品牌更容易触达
- 截断避免面板过长影响体验

## Risks / Trade-offs

- **拼音库体积**: `pinyin-pro` ~15KB (gzip)，对移动端首屏有轻微影响 → 使用动态 `import()` 延迟加载，仅在用户首次输入搜索时加载。
- **多音字歧义**: 拼音首字母匹配可能产生误匹配（如 `长` = `c/z`）→ `pinyin-pro` 支持多音字，取所有可能读音进行匹配，接受适度的模糊性。
- **品牌数据质量**: 用户手动输入的品牌名可能有拼写不一致（如 `Nike` vs `nike` vs `耐克`）→ 提取品牌时做 trim 和大小写归一化。
- **性能**: 大量衣物下，每次搜索都进行拼音计算可能卡顿 → 预计算拼音首字母索引（在 items 加载后一次性计算），搜索时仅做字符串匹配。
